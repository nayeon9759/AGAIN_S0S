<!doctype html>
<meta name="robots" content="noindex">
<html lang="ko">
<head>
Â <meta charset="utf-8" />
Â <meta name="viewport" content="width=device-width,initial-scale=1" />
Â <title>ë°˜ë ¤ì¹œêµ¬ ê¸´ê¸‰ì¼€ì–´ ì„¤ë¬¸</title>
Â <link rel="stylesheet" href="styles.css">
Â <style id="jsbin-css">
/* ê¸°ì¡´ ë””ìì¸ ê·¸ëŒ€ë¡œ ìœ ì§€ */
:root{
Â --bg:#0f1724;
Â --primary:#ff4d4f; /* ë©”ì¸ ìƒ‰ìƒ: ë¶‰ì€ ê³„ì—´ */
Â --accent:#ff9f43; /* ê°•ì¡° ìƒ‰ìƒ: ì£¼í™© ê³„ì—´ */
Â --card:#1f2a38; /* ì¹´ë“œ ë°°ê²½ìƒ‰ */
Â --muted:#b9c0d7;
Â --text-main: #e6eef8; /* ëª…í™•í•œ ë©”ì¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
Â --highlight: #2c3a50; /* ê²°ê³¼ ì¹´ë“œ í•˜ì´ë¼ì´íŠ¸ ë°°ê²½ìƒ‰ */
Â --scrollbar-track: #1f2a38;
Â --scrollbar-thumb: #455263;
}

*{box-sizing:border-box}
/* bodyì— ê¸°ë³¸ ë°°ê²½ê³¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ê°•ì œ ì ìš© */
body{
Â  margin:0;
Â  font-family: "Noto Sans KR", sans-serif;
Â  background:var(--bg);
Â  color:var(--text-main);
Â  padding:20px;
}
.wrap{max-width:900px;margin:0 auto;border-radius:12px;background:var(--card);padding:16px;box-shadow:0 6px 20px rgba(0,0,0,0.5);}

/* HERO */
.hero{padding:16px 20px;border-bottom:1px solid rgba(255,255,255,0.1)}
.hero-inner h1{margin:0;color:var(--primary)}
.lead{margin:4px 0 0;color:var(--muted);font-size:14px}

/* TABS */
.tabs{display:flex; gap:6px; margin:12px 0;}
.tab-btn{flex:1;padding:8px 10px;border-radius:8px;background:var(--card);border:1px solid rgba(255,255,255,0.1);color:var(--muted);cursor:pointer;transition:0.2s}
.tab-btn.active{background:var(--primary);color:white;box-shadow:0 4px 12px rgba(255,77,79,0.4);}

/* submissions */
.submissions-list{
Â margin-top:12px;
Â display:grid;
Â gap:10px;
Â max-height:450px;
Â overflow-y:auto;
Â padding-right:10px;
}

/* â­ï¸ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
.submissions-list::-webkit-scrollbar {
Â  width: 8px;
}
.submissions-list::-webkit-scrollbar-track {
Â  background: var(--scrollbar-track);
Â  border-radius: 10px;
}
.submissions-list::-webkit-scrollbar-thumb {
Â  background-color: var(--primary); /* ìŠ¤í¬ë¡¤ í•¸ë“¤ ìƒ‰ìƒì„ Primaryë¡œ ë³€ê²½í•˜ì—¬ ê°„ì§€ ê°•ì¡° */
Â  border-radius: 10px;
Â  border: 2px solid var(--scrollbar-track);
}

/* â­ï¸ ì œì¶œ ê²°ê³¼ ì¹´ë“œ ë””ìì¸ (ë”ìš± ê°„ê²°í•˜ê³  ê°•ì¡°ë˜ê²Œ ìˆ˜ì •) */
.record {
Â  background: var(--highlight);
Â  padding: 12px;
Â  border-radius: 8px;
Â  border: 1px solid rgba(255, 77, 79, 0.2); /* ì€ì€í•œ í…Œë‘ë¦¬ ê°•ì¡° */
Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* ê·¸ë¦¼ì ê°•ì¡° */
Â  font-size: 14px;
}
.record-item {
Â  padding: 6px 0; /* íŒ¨ë”© ì¦ê°€ */
Â  border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* í•­ëª©ë³„ êµ¬ë¶„ì„  ê°•ì¡° */
Â  display: flex;
Â  justify-content: space-between;
Â  align-items: center; /* í…ìŠ¤íŠ¸ê°€ í•œ ì¤„ì¼ ê²½ìš° ì¤‘ì•™ ì •ë ¬ */
}
.record-item strong {
Â  color: var(--accent); /* ë ˆì´ë¸” ìƒ‰ìƒ ê°•ì¡° (ì£¼í™©ìƒ‰) */
Â  font-weight: 700;
Â  margin-right: 15px;
Â  flex-shrink: 0;
}
.record-item span {
Â  text-align: right;
Â  flex-grow: 1;
Â  color: var(--text-main);
Â  font-weight: 500;
}
.record-item:last-child {
Â  border-bottom: none;
Â  padding-bottom: 0;
}

/* â­ï¸ ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ (Fade-in-Up) */
@keyframes fadeInUp {
Â from {
Â  opacity: 0;
Â  transform: translateY(10px);
Â }
Â to {
Â  opacity: 1;
Â  transform: translateY(0);
Â }
}
.record.fade-in {
Â  opacity: 0;
Â  animation: fadeInUp 0.4s ease-out forwards;
Â  animation-delay: var(--delay, 0s); /* JSì—ì„œ ì„¤ì •í•  ë”œë ˆì´ ë³€ìˆ˜ */
}


/* PANELS */
.panel{display:none;padding:12px 0}
.panel.active{display:block}
.form-card{
Â  background:rgba(255,255,255,0.05);
Â  padding:12px;
Â  margin-bottom:30px;
Â  border-radius:8px;
Â  border:1px solid rgba(255,255,255,0.1)
}
/* ì§ˆë¬¸ í…ìŠ¤íŠ¸ ì•„ë˜ ê°„ê²© ìœ ì§€ */
.q{font-weight:700;margin-bottom:15px}
.required{color:var(--primary)}

.options.inline label{margin-right:16px}
.options.grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}
.options label{display:flex;align-items:center;padding:8px;border-radius:6px;background:rgba(255,255,255,0.02);cursor:pointer;transition:0.2s}
.options input{margin-right:6px}

/* ì…ë ¥ í•„ë“œ ìƒ‰ìƒ ëª…í™•í™” */
select,textarea,input[type="text"]{
Â  width:100%;
Â  padding:8px;
Â  border-radius:6px;
Â  background:rgba(255,255,255,0.03);
Â  border:1px solid rgba(255,255,255,0.1);
Â  color:var(--text-main);
Â  font-size:14px;
}

/* Buttons */
.btn{padding:8px 12px;border-radius:6px;font-weight:700;cursor:pointer;border:none;transition:0.2s}
.btn.primary{background:var(--primary);color:white;box-shadow:0 4px 12px rgba(255,77,79,0.4);}
.btn.primary:hover{transform:scale(1.05)}
.btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.1);}
.btn.small{padding:4px 8px;font-size:12px}

/* guide */
.guide-card{padding:10px;background:rgba(255,255,255,0.01);border-radius:6px;border:1px solid rgba(255,255,255,0.1)}

/* footer */
.footer{margin-top:12px;text-align:center;font-size:12px;color:var(--muted)}

/* YouTube ì˜ìƒ ì„¹ì…˜ */
.video-guide{
Â margin-top: 20px;
Â padding: 16px;
Â background: rgba(255, 77, 79, 0.05);
Â border-radius: 8px;
Â border: 1px solid var(--primary);
}
.guide-title{
Â font-size: 16px;
Â color: var(--primary);
Â margin-top: 0;
Â margin-bottom: 12px;
Â font-weight: 700;
}
.video-container{
Â position: relative;
Â width: 100%;
Â padding-bottom: 50%;
Â height: 0;
Â overflow: hidden;
Â border-radius: 6px;
}
.video-container iframe{
Â position: absolute;
Â top: 0;
Â left: 0;
Â width: 100%;
Â height: 100%;
}
.video-caption{
Â font-size: 13px;
Â color: var(--muted);
Â margin-top: 10px;
Â text-align: center;
}

/* ì°¨íŠ¸ ê´€ë ¨ ìŠ¤íƒ€ì¼ì€ ì œê±°ë¨ */
.charts h4{display: none;}
.charts canvas{display: none;}


@media(max-width:640px){.options.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
Â <main class="wrap">
Â  <header class="hero">
Â  Â <div class="hero-inner">
Â  Â  <h1>ğŸ¾ ê¸´ê¸‰! 24ì‹œ ë™ë¬¼ë³‘ì› ì„¤ë¬¸</h1>
Â  Â  <p class="lead">ì‘ê¸‰ ìƒí™©â€”ìš°ë¦¬ ì„œë¹„ìŠ¤ê°€ ì§„ì§œ ë„ì›€ì´ ë˜ë„ë¡, ì†”ì§í•œ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”.</p>
Â  Â </div>
Â  </header>

Â  <nav class="tabs">
Â  Â <button class="tab-btn active" data-target="survey">ì„¤ë¬¸ ì°¸ì—¬</button>
Â  Â <button class="tab-btn" data-target="guide">ì„¤ë¬¸ ì•ˆë‚´</button>
Â  Â <button class="tab-btn" data-target="submissions">ë‹¤ë¥¸ ì‚¬ëŒ ì˜ê²¬ ë³´ê¸°</button>
Â  </nav>

Â  Â  <section id="survey" class="tab-panel active panel">
Â  Â <form id="petSurveyForm" class="survey-form" autocomplete="off">
Â  Â  Â  Â  <div class="form-card">
Â  Â  Â <label class="q">1. ë°˜ë ¤ë™ë¬¼ì„ í‚¤ìš°ì‹œë‚˜ìš”? <span class="required">*</span></label>
Â  Â  Â <div class="options inline">
Â  Â  Â  <label><input type="radio" name="hasPet" value="ì˜ˆ" required> ì˜ˆ</label>
Â  Â  Â  <label><input type="radio" name="hasPet" value="ì•„ë‹ˆì˜¤"> ì•„ë‹ˆì˜¤</label>
Â  Â  Â </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="form-card">
Â  Â  Â <label class="q">2. ë‹¹ì‹ ì´ ì‚¬ëŠ” ì§€ì—­ì€ ì–´ë””ì¸ê°€ìš”?</label>
Â  Â  Â <div class="options">
Â  Â  Â  <label><input type="radio" name="region" value="ì„œìš¸"> ì„œìš¸</label>
Â  Â  Â  <label><input type="radio" name="region" value="ê²½ê¸°ë„"> ê²½ê¸°ë„</label>
Â  Â  Â  <label><input type="radio" name="region" value="ê²½ìƒë„"> ê²½ìƒë„</label>
Â  Â  Â  <label><input type="radio" name="region" value="ê¸°íƒ€"> ê¸°íƒ€</label>
Â  Â  Â  <input type="text" name="regionOther" placeholder="ì§ì ‘ ì…ë ¥" style="display:none;">
Â  Â  Â </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="form-card">
Â  Â  Â <label class="q">3. í‰ì†Œ ë™ë¬¼ë³‘ì› ì„ íƒ ì‹œ ê°€ì¥ ìš°ì„ ì‹œí•˜ëŠ” ê¸°ì¤€ì€ ë¬´ì—‡ì¸ê°€ìš”? <span class="required">*</span></label>
Â  Â  Â <select name="priorityCriteria" required>
Â  Â  Â  <option value="">ì„ íƒí•˜ì„¸ìš”</option>
Â  Â  Â  <option value="ë¹„ìš©">ë¹„ìš©</option>
Â  Â  Â  <option value="ì§ì›ì˜ ì¹œì ˆë„">ì§ì›ì˜ ì¹œì ˆë„</option>
Â  Â  Â  <option value="ê±°ë¦¬">ê±°ë¦¬</option>
Â  Â  Â  <option value="ë³‘ì›ì˜ í‰íŒ">ë³‘ì›ì˜ í‰íŒ</option>
Â  Â  Â  <option value="ì˜ë£Œì§„ì˜ ì „ë¬¸ì„± ë° ê²½í—˜">ì˜ë£Œì§„ì˜ ì „ë¬¸ì„± ë° ê²½í—˜</option>
Â  Â  Â </select>
Â  Â  </div>

Â  Â  Â  Â  <div class="form-card">
Â  Â  Â <label class="q">4. ì‘ê¸‰ ìƒí™©ì—ì„œ ìš°ë ¤ë˜ëŠ” ì ê³¼, í•„ìš”í•œ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì€ ë¬´ì—‡ì¸ê°€ìš”?â€ <span class="required">*</span></label>
Â  Â  Â <textarea name="concernAndFeature" rows="5" placeholder="ì˜ˆ: ì•¼ê°„ ì‘ê¸‰ë¹„ìš©ì´ ë¶ˆíˆ¬ëª… â†’ ê°€ê²© íˆ¬ëª…ì„± & ì˜ˆìƒë¹„ìš© ê³„ì‚° ê¸°ëŠ¥" required></textarea>
Â  Â  </div>

Â  Â  Â  Â  <div class="form-card">
Â  Â  Â <label class="q">5. ì‘ê¸‰ ìƒí™© ì‹œ ë³‘ì› ì •ë³´ì—ì„œ 'ê°€ì¥ ì¤‘ìš”í•œ ì •ë³´(1ìˆœìœ„)'ì™€ 'ë‘ ë²ˆì§¸ë¡œ ì¤‘ìš”í•œ ì •ë³´(2ìˆœìœ„)'ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”. <span class="required">*</span></label>
Â  Â  Â <div class="priority-grid">
Â  Â  Â  <div>
Â  Â  Â  Â <label class="small">1ìˆœìœ„</label>
Â  Â  Â  Â <select name="priority1" required>
Â  Â  Â  Â  <option value="">ì„ íƒ</option>
Â  Â  Â  Â  <option value="í˜„ì¬ ìš´ì˜ ì—¬ë¶€">A. í˜„ì¬ ìš´ì˜ ì—¬ë¶€</option>
Â  Â  Â  Â  <option value="ì£¼ì°¨ ê°€ëŠ¥ ì—¬ë¶€">B. ì£¼ì°¨ ê°€ëŠ¥ ì—¬ë¶€</option>
Â  Â  Â  Â  <option value="ì£¼ìš” ì§„ë£Œ ê³¼ëª©">C. ì£¼ìš” ì§„ë£Œ ê³¼ëª©</option>
Â  Â  Â  Â </select>
Â  Â  Â  </div>
Â  Â  Â  <div>
Â  Â  Â  Â <label class="small">2ìˆœìœ„</label>
Â  Â  Â  Â <select name="priority2" required>
Â  Â  Â  Â  <option value="">ì„ íƒ</option>
Â  Â  Â  Â  <option value="í˜„ì¬ ìš´ì˜ ì—¬ë¶€">A. í˜„ì¬ ìš´ì˜ ì—¬ë¶€</option>
Â  Â  Â  Â  <option value="ì£¼ì°¨ ê°€ëŠ¥ ì—¬ë¶€">B. ì£¼ì°¨ ê°€ëŠ¥ ì—¬ë¶€</option>
Â  Â  Â  Â  <option value="ì£¼ìš” ì§„ë£Œ ê³¼ëª©">C. ì£¼ìš” ì§„ë£Œ ê³¼ëª©</option>
Â  Â  Â  Â </select>
Â  Â  Â  </div>
Â  Â  Â </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="form-card">
Â  Â  Â <label class="q">6. ë°˜ë ¤ë™ë¬¼ ì‘ê¸‰ ì‹œ ìµœëŒ€ ì§€ë¶ˆ ì˜í–¥ ê¸ˆì•¡ ë²”ìœ„ëŠ”? <span class="required">*</span></label>
Â  Â  Â <div class="options grid">
Â  Â  Â  <label><input type="radio" name="priceRange" value="50ë§Œì› ë¯¸ë§Œ" required> A. 50ë§Œì› ë¯¸ë§Œ</label>
Â  Â  Â  <label><input type="radio" name="priceRange" value="50ë§Œì› ~ 100ë§Œì›"> B. 50ë§Œì› ~ 100ë§Œì›</label>
Â  Â  Â  <label><input type="radio" name="priceRange" value="100ë§Œì› ~ 200ë§Œì›"> C. 100ë§Œì› ~ 200ë§Œì›</label>
Â  Â  Â  <label><input type="radio" name="priceRange" value="200ë§Œì› ì´ìƒ"> D. 200ë§Œì› ì´ìƒ</label>
Â  Â  Â </div>
Â  Â  </div>

Â  Â  <div class="form-actions">
Â  Â  Â <button type="submit" class="btn primary">ì œì¶œí•˜ê¸°</button>
Â  Â  Â <button type="reset" class="btn ghost">ì´ˆê¸°í™”</button>
Â  Â  </div>

Â  Â  <div id="msg" class="msg" aria-live="polite"></div>
Â  Â </form>
Â  </section>

Â  Â  <section id="guide" class="tab-panel panel">
Â  Â <article class="guide-card">
Â  Â  <h3>ì„¤ë¬¸ ì•ˆë‚´ & ê°œì¸ì •ë³´</h3>
Â  Â  <p>ì´ ì„¤ë¬¸ì€ ë°˜ë ¤ë™ë¬¼ ì‘ê¸‰ ëŒ€ì‘ ì„œë¹„ìŠ¤ ê°œì„ ì„ ìœ„í•œ ì¡°ì‚¬ì…ë‹ˆë‹¤. ì œì¶œëœ ì‘ë‹µì€ ìµëª…ìœ¼ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.</p>
Â  Â </article>
Â  </section>

Â  Â  <section id="submissions" class="tab-panel panel">
Â  Â <div class="panel-head">
Â  Â  <h3>ìµœê·¼ ì œì¶œëœ ì˜ê²¬</h3>
Â  Â </div>
Â  Â <div id="submissionsList" class="submissions-list">
Â  Â  <div class="placeholder">ì•„ì§ ì œì¶œëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>
Â  Â </div>

Â  Â  Â  <div class="video-guide">
Â  Â  <h4 class="guide-title">ğŸš¨ ì‘ê¸‰ ìƒí™©! ëŒ€ì²˜ë²• ì•ˆë‚´ (ì°¸ê³  ì˜ìƒ)</h4>
Â  Â  <div class="video-container">
Â  Â  Â  Â  Â  <iframe
Â  Â  Â  width="100%"
Â  Â  Â  height="315"
Â  Â  Â  src="https://www.youtube.com/embed/DYZyQ-DVkvU"
Â  Â  Â  title="ë°˜ë ¤ë™ë¬¼ ì‘ê¸‰ìƒí™© ëŒ€ì²˜ë°©ë²•"
Â  Â  Â  frameborder="0"
Â  Â  Â  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
Â  Â  Â  allowfullscreen>
Â  Â  Â </iframe>
Â  Â  </div>
Â  Â  <p class="video-caption">
Â  Â  ê¸´ê¸‰ ìƒí™© ì‹œ ì„¤ë¬¸ ì‘ë‹µì„ ê¸°ë‹¤ë¦´ ìˆ˜ ì—†ëŠ” ë¶„ë“¤ì„ ìœ„í•´, ë¯¿ì„ ìˆ˜ ìˆëŠ” ì±„ë„ì˜ ì‘ê¸‰ ëŒ€ì²˜ ì˜ìƒì„ ë°”ë¡œ ì œê³µí•©ë‹ˆë‹¤.
Â  Â  </p>
Â  Â </div>
Â  Â  Â </section>

Â  <footer class="footer">
Â  Â <small>Â© ë°˜ë ¤ì¹œêµ¬ ê¸´ê¸‰ì¼€ì–´ Â· ì„¤ë¬¸ìš© ë°ëª¨ í˜ì´ì§€</small>
Â  </footer>
Â </main>

Â <script src="script.js"></script>
<script id="jsbin-javascript">
document.addEventListener("DOMContentLoaded", () => {
Â // Google Apps Script URL (ìƒˆ ë°°í¬ ë²„ì „ì„ í™•ì¸í•˜ì—¬ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”!)
Â const API_URL = 'https://script.google.com/macros/s/AKfycbzd7atjDCME61bCi_7TuToK6CNZxckI7bqReZt6p7b_oq6TRW_TiwbQGlLWnlsXihRJDA/exec';

Â const form = document.getElementById("petSurveyForm");
Â const msg = document.getElementById("msg");
Â const submissionsList = document.getElementById("submissionsList");
Â const regionOtherInput = document.querySelector('input[name="regionOther"]');
Â const tabBtns = document.querySelectorAll(".tab-btn");

Â let localSubmissions = []; // ì„œë²„ì—ì„œ ë¶ˆëŸ¬ì˜¨ ì „ì²´ ë°ì´í„°

Â // â­ï¸ 1. í•µì‹¬ ìˆ˜ì •: Sheetsì˜ ì—´ ì´ë¦„ê³¼ í¼ì˜ name ì†ì„±ì„ ì¼ì¹˜í•˜ë„ë¡ ì¬ì •ì˜ (ë Œë”ë§ì„ ìœ„í•´) â­ï¸
Â // GAS ìŠ¤í¬ë¦½íŠ¸ê°€ í¼ì˜ name ì†ì„±(priorityCriteria, concernAndFeature, priceRange)ì„ Sheetsì˜ ì—´ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•˜ê³  ë§¤í•‘í•©ë‹ˆë‹¤.
Â const keyMap = {
Â  hasPet: "ë°˜ë ¤ë™ë¬¼ ë³´ìœ ",
Â  region: "ì§€ì—­",
Â  regionOther: "ì§ì ‘ ì…ë ¥ ì§€ì—­",
Â  priorityCriteria: "ë³‘ì› ì„ íƒ ê¸°ì¤€", Â // Q3
Â  concernAndFeature: "ìš°ë ¤/í•„ìš” ê¸°ëŠ¥", // Q4
Â  priority1: "1ìˆœìœ„ ì •ë³´",
Â  priority2: "2ìˆœìœ„ ì •ë³´",
Â  priceRange: "ì§€ë¶ˆ ì˜í–¥ ê¸ˆì•¡",Â  Â  Â  // Q6
Â };

Â // â­ï¸ 2. í‘œì‹œí•  í•µì‹¬ í•­ëª©ì„ í¼ì˜ name ì†ì„± (Sheets ì—´ ì´ë¦„)ìœ¼ë¡œ ì •ì˜ â­ï¸
Â // Q3, Q4, Q6 í•­ëª©ì„ ëª¨ë‘ ë³´ì—¬ì£¼ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
Â const displayKeys = ["priorityCriteria", "concernAndFeature", "priceRange"];


Â /**
Â * 1. ì„œë²„ì—ì„œ ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ localSubmissionsë¥¼ ê°±ì‹ í•˜ê³ , í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ëŠ” í•µì‹¬ í•¨ìˆ˜
Â */
Â const fetchSubmissions = async () => {
Â  try {
Â  Â const uniqueApiUrl = `${API_URL}?t=${new Date().getTime()}`;
Â  Â submissionsList.innerHTML = '<div class="placeholder">ì œì¶œëœ ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>';

Â  Â const res = await fetch(uniqueApiUrl);
Â  Â if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
Â Â 
Â  Â const data = await res.json();
Â Â 
Â  Â if (Array.isArray(data)) {
Â  Â  localSubmissions = data;
Â  Â  renderSubmissions(); // ëª©ë¡ ê°±ì‹ 
Â  Â } else {
Â  Â  submissionsList.innerHTML = '<div class="placeholder">ë°ì´í„° ë¡œë”© ì‹¤íŒ¨: ì„œë²„ ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>';
Â  Â }
Â  } catch (error) {
Â  Â console.error("ì„œë²„ ë°ì´í„° ë¡œë”© ì˜¤ë¥˜:", error);
Â  Â submissionsList.innerHTML = '<div class="placeholder">ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” ì„œë²„ ì˜¤ë¥˜ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
Â  }
Â };


Â // 2. í¼ ì œì¶œ (POST) ë¡œì§ - ì¤‘ë³µ ì œì¶œ ë°©ì§€ ë° ì„œë²„ ì‘ë‹µ í™•ì¸ ë¡œì§ ì¶”ê°€
Â form.addEventListener("submit", async (e) => {
Â  e.preventDefault();
Â  const submitBtn = document.querySelector('.btn.primary');
Â  msg.textContent = "âœ… ì œì¶œ ì¤‘...";
Â  submitBtn.disabled = true; // ë²„íŠ¼ ë¹„í™œì„±í™”ë¡œ ì¤‘ë³µ í´ë¦­ ë°©ì§€

Â  const data = new FormData(form);
Â  const payload = {};
Â  for (const [k, v] of data.entries()) payload[k] = v;

Â  try {
Â  Â const res = await fetch(API_URL, {
Â  Â  method: 'POST',
Â  Â  // âŒ mode: 'no-cors' ì œê±°
Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  body: JSON.stringify(payload)
Â  Â });

Â  Â // 1. HTTP ì‘ë‹µ ìƒíƒœ ì½”ë“œ í™•ì¸
Â  Â if (!res.ok) {
Â  Â  throw new Error(`ì„œë²„ ì—°ê²° ì˜¤ë¥˜ (ìƒíƒœ: ${res.status})`);
Â  Â }

Â  Â // 2. ì„œë²„ JSON ì‘ë‹µ í™•ì¸ (GASì—ì„œ {status: 'success'}ë¥¼ ë¦¬í„´í•´ì•¼ í•¨)
Â  Â const result = await res.json(); 

Â  Â if (result.status === 'success') { 
Â  Â  msg.textContent = "ğŸ’Œ ì œì¶œì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì˜ê²¬ ëª©ë¡ì„ ê°±ì‹ í•©ë‹ˆë‹¤.";

Â  Â  await fetchSubmissions(); // ì„±ê³µ ì‹œ ë°ì´í„° ê°±ì‹ 
Â  Â  form.reset();
Â  Â  regionOtherInput.style.display = "none";
Â  Â  // 'ë‹¤ë¥¸ ì‚¬ëŒ ì˜ê²¬ ë³´ê¸°' íƒ­ìœ¼ë¡œ ìë™ ì „í™˜ ë° í™œì„±í™”
Â  Â  document.querySelector('.tab-btn[data-target="submissions"]').click();
Â  Â } else {
Â  Â  // GASì—ì„œ ì—ëŸ¬ë¥¼ ë³´ëƒˆì„ ê²½ìš°
Â  Â  throw new Error(`ì„œë²„ ì²˜ë¦¬ ì‹¤íŒ¨: ${result.message || 'ë°ì´í„° ì €ì¥ ì‹¤íŒ¨'}`);
Â  Â }

Â  } catch (error) {
Â  Â // ì œì¶œ ì‹¤íŒ¨ ì‹œ
Â  Â msg.textContent = `âš ï¸ ì œì¶œ ì‹¤íŒ¨ ì˜¤ë¥˜: ${error.message}. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`;
Â  Â console.error("ì œì¶œ ì˜¤ë¥˜:", error);
Â  Â // ì‹¤íŒ¨ ì‹œì—ëŠ” fetchSubmissions()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•„ ì¤‘ë³µ ì €ì¥ì„ ë°©ì§€í•¨.
Â  } finally {
Â  Â submitBtn.disabled = false; // ë²„íŠ¼ ì¬í™œì„±í™”
Â  }
Â });

Â // 3. submissions ë Œë”ë§
Â const renderSubmissions = () => {
Â  submissionsList.innerHTML = "";
Â 
Â  if (localSubmissions.length === 0) {
Â  Â  submissionsList.innerHTML = '<div class="placeholder">ì•„ì§ ì œì¶œëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
Â  Â  return;
Â  }
Â 
Â  // ì¤‘ë³µ ë Œë”ë§ ë°©ì§€ ë° ìµœì‹  10ê°œë§Œ í‘œì‹œ (slice().reverse().slice(0, 10))
Â  localSubmissions.slice().reverse().slice(0, 10).forEach((sub, index) => {
Â  Â const card = document.createElement("div");
Â  Â card.className = "record fade-in";
Â  Â card.style.setProperty('--delay', `${index * 0.05}s`);

Â  Â // â­ï¸ displayKeys (í¼ì˜ name ì†ì„±)ë§Œ ìˆœíšŒí•˜ë©° ë Œë”ë§
Â  Â let html = displayKeys
Â  Â  Â .map(k => {
Â  Â  Â  Â // keyMapì—ì„œ í¼ name(k)ì— ë§ëŠ” ë ˆì´ë¸”ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
Â  Â  Â  Â const label = keyMap[k];
Â  Â  Â  Â let value = sub[k]; // Sheetsì—ì„œ ì½ì–´ì˜¨ ê°’
Â  Â  Â Â 
Â  Â  Â  Â // ìµœì¢… ê°’ì´ ì—†ê±°ë‚˜ ë¹ˆ ë¬¸ìì—´ì´ë©´ "ì‘ë‹µ ì—†ìŒ"ì„ í‘œì‹œ
Â  Â  Â  Â const displayValue = (value && value !== "" && value !== " ") ? value : "ì‘ë‹µ ì—†ìŒ";
Â  Â  Â Â 
Â  Â  Â  Â // ìŠ¤íƒ€ì¼ë§ ì½”ë“œ ìœ ì§€
Â  Â  Â  Â return `<div class="record-item">
Â  Â  Â  Â  Â <strong>${label}:</strong>
Â  Â  Â  Â  Â <span class="${displayValue === 'ì‘ë‹µ ì—†ìŒ' ? 'text-muted' : 'text-accent'}">${displayValue}</span>
Â  Â  Â  Â  </div>`;
Â  Â  Â })
Â  Â  .join("");
Â  Â 
Â  Â if (!html) html = "<div>ì œì¶œëœ ì •ë³´ ì—†ìŒ</div>";
Â  Â card.innerHTML = html;
Â  Â submissionsList.appendChild(card);
Â  });
Â };

Â // 4. íƒ­ í´ë¦­ ì´ë²¤íŠ¸ (ê¸°ì¡´ ìœ ì§€)
Â tabBtns.forEach(btn => {
Â  btn.addEventListener("click", () => {
Â  Â tabBtns.forEach(b => b.classList.remove("active"));
Â  Â document.querySelectorAll(".tab-panel").forEach(p => p.classList.remove("active"));
Â Â 
Â  Â btn.classList.add("active");
Â  Â document.getElementById(btn.dataset.target).classList.add("active");

Â  Â // submissions íƒ­ì´ í™œì„±í™”ë  ë•Œë§Œ fetchSubmissions í˜¸ì¶œ
Â  Â if (btn.dataset.target === "submissions") {
Â  Â  fetchSubmissions();
Â  Â }
Â  });
Â });

Â // 5. "ê¸°íƒ€" ì…ë ¥ í† ê¸€ (ê¸°ì¡´ ìœ ì§€)
Â document.querySelectorAll('input[name="region"]').forEach(radio => {
Â  radio.addEventListener('change', () => {
Â  Â if (radio.value === "ê¸°íƒ€") {
Â  Â  regionOtherInput.style.display = "block";
Â  Â  regionOtherInput.required = true;
Â  Â } else {
Â  Â  regionOtherInput.style.display = "none";
Â  Â  regionOtherInput.required = false;
Â  Â }
Â  });
Â });

});
</script>
</body>
</html>
